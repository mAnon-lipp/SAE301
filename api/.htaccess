# CORS headers (placed in IfModule to avoid errors if mod_headers is not enabled)
# Note: Les headers CORS sont gérés dynamiquement dans index.php pour supporter plusieurs origines
<IfModule mod_headers.c>
  # Autoriser ton site GitHub ET localhost (pour le dev)
  SetEnvIf Origin "^https://(manon-lipp\.github\.io|localhost:5173)$" ORIGIN_SUB_DOMAIN=$0
  Header always set Access-Control-Allow-Origin "%{ORIGIN_SUB_DOMAIN}e" env=ORIGIN_SUB_DOMAIN
  
  Header always set Access-Control-Allow-Methods "GET,POST,DELETE,PATCH,PUT,OPTIONS"
  Header always set Access-Control-Allow-Headers "Content-Type,Authorization,X-Requested-With"
  Header always set Access-Control-Allow-Credentials "true"
  Header always set Access-Control-Max-Age "3600"
</IfModule>

<IfModule mod_rewrite.c>
  RewriteEngine On

  # Some hosts may require you to use the `RewriteBase` directive.
  # Determine the RewriteBase automatically and set it as environment variable.
  # If you are using Apache aliases to do mass virtual hosting or installed the
  # project in a subdirectory, the base path will be prepended to allow proper
  # resolution of the index.php file and to redirect to the correct URI. It will
  # work in environments without path prefix as well, providing a safe, one-size
  # fits all solution. But as you do not need it in this case, you can comment
  # the following 2 lines to eliminate the overhead.
  
  #RewriteCond %{REQUEST_URI}::$1 ^(/.+)/(.*)::\2$
  #RewriteRule ^(.*) - [E=BASE:%1]
  
  # If the above doesn't work you might need to set the `RewriteBase` directive manually, it should be the
  # absolute physical path to the directory that contains this htaccess file.
  # RewriteBase /

  #RewriteCond %{REQUEST_FILENAME} !-f
  #RewriteRule ^ index.php [QSA,L]
  
  RewriteRule .* index.php
</IfModule>